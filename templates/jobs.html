{% extends "base.html" %}
{% block content %}
<div class="min-h-[calc(100vh-4rem)] py-8 bg-white dark:bg-black text-black dark:text-white">
  <div class="container mx-auto px-4">
    <h1 class="text-3xl font-bold text-center mb-6">Jobs Dashboard</h1>

    <!-- Upload Form -->
    <form action="{{ url_for('jobs') }}" method="POST"
          class="max-w-md mx-auto mb-8 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow p-6">
      <div class="mb-4">
        <label for="job_title" class="block text-sm font-medium mb-1">Job Title</label>
        <input id="job_title" name="job_title" type="text" required
               placeholder="Senior Unity Developer"
               class="w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-indigo-300 dark:focus:ring-indigo-600" />
      </div>
      <div class="mb-4">
        <label for="job_text" class="block text-sm font-medium mb-1">Job Description</label>
        <textarea id="job_text" name="job_text" rows="2" required
                  placeholder="Paste the full description…"
                  class="w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-300 dark:border-gray-600 rounded px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-indigo-300 dark:focus:ring-indigo-600 resize-none"></textarea>
      </div>
      <div class="mb-4">
        <label for="industry" class="block text-sm font-medium mb-1">Market</label>
        <select id="industry" name="industry" required
                class="w-full …">
          {% for ind in industries %}
            <option value="{{ ind }}">{{ ind.capitalize() }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-4">
        <label for="company" class="block text-sm font-medium mb-1">Company (optional)</label>
        <input id="company" name="company" type="text" placeholder="e.g. Google"
               class="w-full …" />
      </div>
      <button type="submit"
              class="w-full bg-black dark:bg-white text-white dark:text-black font-medium py-2 rounded hover:bg-black/90 dark:hover:bg-white/90 transition">
        Add Job
      </button>
    </form>

    <!-- Job Tiles Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% if jobs %}
        {% for job in jobs %}
        <div class="p-4 border rounded-lg flex justify-between items-center">
          <div>
            <h3 class="font-bold">{{ job.title }}</h3>
            <p class="text-sm text-gray-500">ID: {{ job.id }}</p>
          </div>
          <div class="flex space-x-2">
            <form action="{{ url_for('extract_keywords', job_id=job.id) }}" method="POST">
              <button type="submit" class="btn btn-primary">Analyze</button>
            </form>
            <form action="{{ url_for('delete_job', job_id=job.id) }}" method="POST">
              <button type="submit" class="btn btn-error">Delete</button>
            </form>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <p class="col-span-full text-center text-gray-500 dark:text-gray-400">
          No jobs added yet.
        </p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
